!function(){var r=require("module").Module,e=r._nodeModulePaths,s=process.cwd(),o=e(s).filter(function(r){return-1===module.paths.indexOf(r)});if(require.main&&require.main.paths&&(require.main.paths=o.concat(require.main.paths)),r._nodeModulePaths=function(r){var s=e.call(this,r),n=o.filter(function(r){return-1===s.indexOf(r)});return s=s.concat(n)},process.argv[2]&&"dom"===process.argv[2]){var n,t=require("fs"),c=require("path").join(s,"package.json");if(t.existsSync(c))try{n=require(c).jsRepl}catch(r){process.send({type:"other",error:"no package.json"})}require("@achil/repl-dom")(n)}process.on("disconnect",function(){process.exit()})}();var $console=function(){var r=require("util").inspect,e={errors:!1};function s(r){if("string"==typeof r)return{message:r};if(r instanceof Error){var e={message:r.message,stack:r.stack,name:r.name};return Object.keys(r).forEach(function(s){e[s]=r[s]}),e}}return process.argv[3]&&"errors"===process.argv[3]&&(e.errors=!0),{log:function(){var o=Array.prototype.slice.call(arguments),n={type:"console",line:o.pop(),values:r(o)};e.errors&&(n.error=s(new Error)),process.send&&process.send(n)},error:function(r){process.send&&process.send({type:"error",error:s(r)})}}}();