!function(){var e=require("module").Module,r=e._nodeModulePaths,n=process.cwd(),s=r(n).filter(function(e){return-1===module.paths.indexOf(e)});require.main&&require.main.paths&&(require.main.paths=s.concat(require.main.paths)),e._nodeModulePaths=function(e){var n=r.call(this,e),o=s.filter(function(e){return-1===n.indexOf(e)});return n=n.concat(o)};var o=JSON.parse(process.env.jsRepl);if(process.argv[2]&&"dom"===process.argv[2]){var t,c=require("fs"),i=require("path").join(n,"package.json");if(c.existsSync(i))try{t=require(i).jsRepl}catch(e){process.send({type:"other",error:"no package.json"})}require(o.dom)(t)}process.on("disconnect",function(){process.exit()}),global[o.cvVar]=function(){var e,r=require("util").inspect,n=[],s=[],t=!1;function c(e){if("string"==typeof e)return{message:e};if(e instanceof Error){var r={message:e.message,stack:e.stack,name:e.name};return Object.keys(e).forEach(function(n){r[n]=e[n]}),r}}function i(){process.send({type:"console",rels:s}),s=[],t=!0,process.send({type:"end",kind:"sync"}),o.test&&e.check(50).then(function(){process.send({type:"end",kind:"async"})})}return o.test&&(e=require(o.test)),{data:{},log:function(){var e=Array.prototype.slice.call(arguments),n=e.pop(),o={type:"console",line:e.pop(),values:r(e,{depth:null}),rel:n};t?process.send(o):s.push(o)},error:function(e){process.send({type:"error",error:c(e)})},covLog:function(e){var r;if(r=this.data)if(n.length){if(n.length)if(e)process.send({type:"cov",covAsync:e});else{var s={};Object.keys(r).forEach(function(e){n.includes(e)||(s[e]=r[e],n.push(e))}),process.send({type:"cov",cov:s})}}else(n=Object.keys(r)).length&&process.send({type:"cov",cov:r}),i();else i()},cov:function(e,r,s,o){n.length&&n.includes(o)&&this.covLog({type:e,id:r,index:s,rel:o})}}}()}();